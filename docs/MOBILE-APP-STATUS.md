# تطبيق الموبايل — الحالة والربط

## الربط بالـ Backend

تطبيق الموبايل (`bi-management-mobile`) يتصل **بنفس واجهة الـ API** للـ Backend (Node/Express).  
لا يوجد له اتصال مباشر بقاعدة البيانات.

- في التطوير: `API_URL = 'http://127.0.0.1:3000/api'` (مع `adb reverse tcp:3000 tcp:3000` للجهاز الفعلي).
- في الإنتاج: يُفضّل تعيين `API_URL` إلى عنوان الـ API الفعلي (مثلاً `https://api.bi-management.com/api`).

## تأثير نقل قاعدة البيانات إلى PostgreSQL

نقل الـ Backend من SQLite إلى **PostgreSQL** لا يغيّر شيء من جهة تطبيق الموبايل:

- التطبيق يبقى يرسل طلبات HTTP إلى نفس المسارات (`/auth/login`, `/tasks`, `/attendance`, …).
- التغيير فقط على الخادم (كيف يقرأ/يكتب من/إلى القاعدة).  
لذلك **لا يلزم أي تعديل في كود الموبايل** عند استخدام PostgreSQL.

## ما يعمل من التطبيق (حسب الكود الحالي)

| الميزة           | الحالة |
|------------------|--------|
| تسجيل الدخول     | متصل بـ `/auth/login` |
| المهام           | قائمة وتفاصيل (يفترض `/tasks`, `/tasks/:id`) |
| الحضور           | تسجيل دخول/خروج (يفترض `/attendance/check-in`, `check-out`) |
| الإشعارات        | قائمة وقراءة (يفترض `/notifications`) |
| الدردشة مع الذكاء| متصل بـ `/ai/chat` |
| الأجهزة/المسح   | تفاصيل جهاز ومسح (يفترض `/devices`) |
| الموافقات       | قائمة وموافقة/رفض (يفترض `/approvals`) |
| الضمان           | متصل بمسارات `/warranty` |
| الفواتير         | قائمة وعرض (يفترض `/invoices`) |

## ما يُنصح به

1. **التحقق يدوياً**: تشغيل التطبيق والـ Backend (سواء مع SQLite أو PostgreSQL) والتحقق من تسجيل الدخول والمهام والحضور.
2. **ضبط عنوان الإنتاج**: تعيين `API_URL` في `bi-management-mobile/src/services/api.js` ليطابق عنوان الـ API في بيئة الإنتاج.
3. **ميزات إضافية**: إن رغبت بإنشاء فواتير أو تقارير من الموبايل، إضافة الشاشات وربطها بمسارات الـ API الحالية (`/invoices`, `/reports`, …).
