# 🏭 BI ERP - النظام الداخلي للشركة

> **آخر تحديث:** 2026-02-01
> **المسؤول:** المالك
> **الأولوية:** قصوى

---

## 🎯 الهدف

نظام ERP داخلي كامل لإدارة شركة BI بشكل مستقل عن أنظمة البيع، مع إمكانية التكامل.

---

## 📦 الوحدات (Modules)

### 1. إدارة المنتجات (Products)
```
┌─────────────────────────────────────────┐
│ Product Management                       │
├─────────────────────────────────────────┤
│ • إضافة/تعديل/حذف منتجات               │
│ • تصنيفات (لابتوب، إكسسوارات، الخ)      │
│ • مواصفات تفصيلية                       │
│ • صور متعددة                            │
│ • باركود وسيريال نمبر                   │
│ • 🔒 سعر الشراء (سري)                   │
│ • أسعار البيع (1، 2، 3، جملة)           │
│ • 🔒 هامش الربح (سري)                   │
└─────────────────────────────────────────┘
```

**الحقول:**
| الحقل | النوع | ملاحظات |
|-------|-------|---------|
| id | UUID | معرف فريد |
| name | String | اسم المنتج |
| barcode | String | الباركود |
| serial_number | String | السيريال |
| category_id | FK | التصنيف |
| brand_id | FK | الماركة |
| buy_price | Decimal | 🔒 سعر الشراء |
| sell_price_1 | Decimal | سعر البيع 1 |
| sell_price_2 | Decimal | سعر البيع 2 |
| sell_price_3 | Decimal | سعر البيع 3 |
| wholesale_price | Decimal | سعر الجملة |
| profit_margin | Decimal | 🔒 هامش الربح |
| specs | JSON | المواصفات |
| images | Array | الصور |
| min_stock | Integer | الحد الأدنى |
| status | Enum | متاح/نافذ/معطل |

---

### 2. تتبع المرتجعات (Returns Tracking) ⭐ الأولوية
```
┌─────────────────────────────────────────┐
│ Returns Tracking System                  │
├─────────────────────────────────────────┤
│ 📤 إرسال للمصدر                          │
│   • تاريخ الإرسال                       │
│   • سبب الإرجاع                         │
│   • المورد (سيد أحمد، التميمي، الخ)      │
│   • قائمة المنتجات بالسيريال            │
│   • صور قبل الإرسال                     │
│                                          │
│ 📥 الاستلام                              │
│   • تاريخ الاستلام                      │
│   • الحالة (مُصلح، مُستبدل، مرفوض)      │
│   • ملاحظات الصيانة                     │
│                                          │
│ ⚠️ التنبيهات                            │
│   • معلق > 7 أيام = تنبيه               │
│   • معلق > 14 يوم = تصعيد               │
│   • معلق > 30 يوم = إنذار               │
└─────────────────────────────────────────┘
```

**حالات المرتجع:**
```
pending      → تم الإرسال، بانتظار الرد
in_repair    → قيد الإصلاح
repaired     → تم الإصلاح
replaced     → تم الاستبدال
rejected     → مرفوض
returned     → عاد للمخزن
lost         → ⚠️ مفقود
```

**واجهة التتبع:**
```
┌─────────────────────────────────────────────────────┐
│  📦 تتبع المرتجعات                    [+ إرسال جديد] │
├─────────────────────────────────────────────────────┤
│  🔴 معلقة > 14 يوم: 2                               │
│  🟡 معلقة > 7 أيام: 5                               │
│  🟢 قيد المعالجة: 8                                  │
├─────────────────────────────────────────────────────┤
│  ┌─────┬──────────────┬─────────┬────────┬────────┐ │
│  │ # │ المنتج        │ المورد  │ المدة  │ الحالة │ │
│  ├─────┼──────────────┼─────────┼────────┼────────┤ │
│  │ 1 │ Dell 5530     │ العربي  │ 15 يوم │ 🔴     │ │
│  │ 2 │ HP 450 G9     │ التميمي │ 12 يوم │ 🔴     │ │
│  │ 3 │ Lenovo T14    │ العربي  │ 8 أيام │ 🟡     │ │
│  │ 4 │ Dell 3520     │ التميمي │ 3 أيام │ 🟢     │ │
│  └─────┴──────────────┴─────────┴────────┴────────┘ │
│                                                      │
│  [📋 تقرير] [📞 تذكير جماعي] [📊 إحصائيات]          │
└─────────────────────────────────────────────────────┘
```

---

### 3. إدارة المخزون (Inventory)
```
┌─────────────────────────────────────────┐
│ Inventory Management                     │
├─────────────────────────────────────────┤
│ • المخزون الحالي لكل منتج              │
│ • حركة المخزون (دخول/خروج)             │
│ • تنبيهات نقص المخزون                   │
│ • جرد دوري                              │
│ • تقارير المخزون                        │
│                                          │
│ المخازن:                                 │
│ ├── مخزن 1 (الرئيسي)                    │
│ ├── مواد تالفة                          │
│ └── مرتجعات قيد المعالجة                │
└─────────────────────────────────────────┘
```

---

### 4. إدارة الموردين (Suppliers)
```
┌─────────────────────────────────────────┐
│ Supplier Management                      │
├─────────────────────────────────────────┤
│ الموردين الرئيسيين:                     │
│ • سيد أحمد (العربي للحاسبات)            │
│ • سليم التميمي                          │
│ • أبو منتظر (العالمية)                  │
│ • وكيل الديوانية                        │
│                                          │
│ لكل مورد:                               │
│ • معلومات الاتصال                       │
│ • سجل المشتريات                         │
│ • سجل المرتجعات                         │
│ • متوسط وقت الإصلاح                     │
│ • التقييم والموثوقية                    │
│ • 🔒 الأسعار والاتفاقيات                │
└─────────────────────────────────────────┘
```

---

### 5. إدارة الموظفين (Employees)
```
┌─────────────────────────────────────────┐
│ Employee Management                      │
├─────────────────────────────────────────┤
│ الموظفين:                               │
│ • حيدر - إدارة                          │
│ • سكر - خدمة العملاء                    │
│ • ياسر - فحص اللابتوبات                 │
│                                          │
│ لكل موظف:                               │
│ • البيانات الشخصية                      │
│ • الراتب والحوافز 🔒                    │
│ • سجل الحضور                            │
│ • المهام والإنجاز                       │
│ • الصلاحيات                             │
│ • التقييم                               │
└─────────────────────────────────────────┘
```

---

### 6. المحاسبة والمالية (Accounting) 🔒
```
┌─────────────────────────────────────────┐
│ Accounting (للمالك فقط)                  │
├─────────────────────────────────────────┤
│ • الإيرادات اليومية/الشهرية            │
│ • المصروفات                             │
│ • صافي الربح                            │
│ • الديون (علينا/لنا)                    │
│ • التدفق النقدي                         │
│ • تقارير مالية                          │
│                                          │
│ الديون الحالية:                         │
│ • شركة الوزير: ~7 مليون (متبقي)         │
│ • [أي ديون أخرى]                        │
└─────────────────────────────────────────┘
```

---

### 7. التقارير (Reports)
```
┌─────────────────────────────────────────┐
│ Reports System                           │
├─────────────────────────────────────────┤
│ تقارير عامة (للجميع):                   │
│ • المخزون الحالي                        │
│ • المبيعات اليومية (بدون أرباح)         │
│ • المرتجعات المعلقة                     │
│                                          │
│ تقارير سرية (للمالك فقط): 🔒           │
│ • الأرباح اليومية/الشهرية              │
│ • تحليل هوامش الربح                    │
│ • أداء الموردين                         │
│ • تكاليف التشغيل                        │
│ • التوقعات المالية                      │
└─────────────────────────────────────────┘
```

---

### 8. التنبيهات (Notifications)
```
┌─────────────────────────────────────────┐
│ Notification System                      │
├─────────────────────────────────────────┤
│ أنواع التنبيهات:                        │
│ 🔴 عاجل: مرتجع معلق > 14 يوم            │
│ 🟡 تحذير: مخزون منخفض                   │
│ 🔵 معلومات: طلب جديد                    │
│                                          │
│ قنوات التنبيه:                          │
│ • داخل النظام                           │
│ • واتساب (مستقبلاً)                     │
│ • إيميل                                 │
└─────────────────────────────────────────┘
```

---

## 🔐 نظام الصلاحيات

```
┌──────────────────────────────────────────────────────────────┐
│                     Permission Matrix                         │
├──────────────┬────────┬──────────┬─────────┬────────────────┤
│ الصلاحية     │ مالك   │ محاسب    │ مخزن    │ مبيعات        │
├──────────────┼────────┼──────────┼─────────┼────────────────┤
│ سعر الشراء   │ ✅     │ ❌       │ ❌      │ ❌            │
│ الأرباح      │ ✅     │ ❌       │ ❌      │ ❌            │
│ الرواتب      │ ✅     │ ❌       │ ❌      │ ❌            │
│ إضافة منتج   │ ✅     │ ✅       │ ❌      │ ❌            │
│ تعديل سعر    │ ✅     │ ✅       │ ❌      │ ❌            │
│ فاتورة بيع   │ ✅     │ ✅       │ ❌      │ ✅            │
│ حركة مخزون   │ ✅     │ ✅       │ ✅      │ ❌            │
│ المرتجعات    │ ✅     │ ✅       │ ✅      │ ❌            │
│ التقارير     │ ✅     │ محدود    │ محدود   │ ❌            │
└──────────────┴────────┴──────────┴─────────┴────────────────┘
```

---

## 🗄️ قاعدة البيانات

### الجداول الرئيسية:
```sql
-- المنتجات
bi_products
bi_categories
bi_brands

-- المخزون
bi_inventory
bi_stock_movements
bi_warehouses

-- المرتجعات ⭐
bi_returns
bi_return_items
bi_return_follow_ups

-- الموردين
bi_suppliers
bi_supplier_transactions

-- الموظفين
bi_employees
bi_attendance
bi_salaries

-- المالية 🔒
bi_revenues
bi_expenses
bi_debts

-- النظام
bi_users
bi_permissions
bi_audit_logs
bi_notifications
```

---

## 🔗 التكامل مع الأنظمة الأخرى

### مع Saeed ERP (سيد طاهر):
```
BI ERP ──────► Saeed ERP
       المنتجات (بدون سعر الشراء)
       المخزون المتاح
       حالة المرتجعات

Saeed ERP ──────► BI ERP
          الفواتير الجديدة
          المبيعات
          طلبات الضمان
```

### مع BI Store (حيدر):
```
BI ERP ──────► BI Store
       المنتجات المتاحة
       الأسعار (بيع فقط)
       الكميات

BI Store ──────► BI ERP
           الطلبات الجديدة
           حجوزات
```

---

## 📱 الواجهات

### لوحة تحكم المالك:
```
┌─────────────────────────────────────────────────────────┐
│  🏠 BI ERP - لوحة التحكم                    👤 المالك   │
├─────────────────────────────────────────────────────────┤
│                                                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐ │
│  │ 💰       │  │ 📦       │  │ ⚠️       │  │ 📈       │ │
│  │ الربح    │  │ المخزون  │  │ تنبيهات  │  │ المبيعات │ │
│  │ اليوم    │  │          │  │          │  │          │ │
│  │ 2.5M     │  │ 156      │  │ 7        │  │ 12       │ │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 📦 المرتجعات المعلقة                               │ │
│  ├────────────────────────────────────────────────────┤ │
│  │ 🔴 Dell 5530 - العربي - 15 يوم    [تذكير] [تفاصيل] │ │
│  │ 🟡 HP 450 G9 - التميمي - 8 أيام   [تذكير] [تفاصيل] │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 💵 الديون                                          │ │
│  ├────────────────────────────────────────────────────┤ │
│  │ شركة الوزير: 7,000,000 IQD                        │ │
│  │ [+ المزيد]                                         │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

---

## ✅ خطوات التنفيذ

### الأسبوع 1:
- [ ] إنشاء قاعدة البيانات
- [ ] جدول المنتجات
- [ ] جدول المرتجعات
- [ ] API أساسي

### الأسبوع 2:
- [ ] واجهة تتبع المرتجعات
- [ ] نظام التنبيهات
- [ ] لوحة تحكم المالك

### الأسبوع 3:
- [ ] إدارة المخزون
- [ ] إدارة الموردين
- [ ] التقارير الأساسية

### الأسبوع 4:
- [ ] التكامل مع Saeed ERP
- [ ] التكامل مع BI Store
- [ ] الاختبار والإطلاق

---

*آخر تحديث: 2026-02-01*
