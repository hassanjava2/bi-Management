# قائمة تحقق النشر — BI Smart Management

استخدم هذه القائمة قبل رفع النظام على سيرفر حقيقي أو بيئة إنتاج.

---

## قبل النشر

- [ ] **البيئة:** تحديد بيئة التشغيل (سيرفر واحد، Docker، سحابة) وملف `.env` المناسب.
- [ ] **قاعدة البيانات:** التأكد من مسار قاعدة البيانات (SQLite) أو اتصال PostgreSQL إن وُجد؛ صلاحيات القراءة/الكتابة للمجلد.
- [ ] **المتغيرات الحساسة:** تغيير `JWT_SECRET` و `ENCRYPTION_KEY` وعدم ترك القيم الافتراضية.
- [ ] **CORS:** تعيين `CORS_ORIGIN` لعنوان الواجهة الفعلي (لا تترك `localhost` في الإنتاج).
- [ ] **النسخ الاحتياطي:** التأكد من تشغيل النسخ التلقائي (الساعة 2 صباحاً في Scheduler) ووجود مسار النسخ ومساحة كافية.
- [ ] **الاستعادة:** تنفيذ إجراء استعادة من نسخة احتياطية مرة واحدة على بيئة اختبار والتأكد من نجاحها.
- [ ] **الصلاحيات:** تشغيل `npm run db:init` أو تحميل الصلاحيات (seeds) حسب البيئة.
- [ ] **الجداول الإضافية:** تشغيل `database/schema_additional.sql` ثم (اختياري) `database/seeds/alert_rules_seed.sql` لتفعيل قواعد التنبيهات (مخزون تحت الحد، فواتير متأخرة، رصيد سالب).
- [ ] **الواجهة:** تشغيل `npm run build` في مجلد `frontend` وخدمة المخرجات عبر خادم ويب أو Nginx.

---

## بعد النشر

- [ ] **Health:** التحقق من `GET /api/health` و (إن وُجد) `GET /api/health/db`.
- [ ] **تسجيل الدخول:** التأكد من نجاح تسجيل الدخول وحصول المستخدم على الصلاحيات المتوقعة.
- [ ] **لوحة المدير:** التحقق من `GET /api/reports/executive-dashboard` وإظهار الإحصائيات والتنبيهات.
- [ ] **النسخ الاحتياطي:** مراقبة مجلد النسخ أو السجلات للتأكد من إنشاء نسخ يومية.

---

## نسخ احتياطي خارج السيرفر (موصى به)

- [ ] إعداد نسخ ملفات النسخ الاحتياطي إلى جهاز آخر أو سحابة (مثلاً عبر سكربت أو cron ينقل `backups/*.db` إلى مخزن خارجي).
- [ ] توثيق إجراء الاستعادة من النسخة الخارجية في `docs/BACKUP-RESTORE.md`.
